<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/styles.css">
    <title>Meu Restaurante</title>
</head>

<body>
    <header>
        <nav>
            <div id="logo">
                <a href="index.html"><i class="fa-solid fa-utensils"></i> CoolMida</a>
            </div>
            <div class="menu-items">
                <ul>
                    <li><a href="../index.html">Início</a></li>
                    <li><a href="../restaurantes.html">Restaurantes</a></li>
                    <li><a href="../feed.html">Feed</a></li>
                </ul>
            </div>
            <div class="access">
                <button onclick="showLogin()">Login</button>
                |
                <button onclick="showRegister()">Cadastro</button>
            </div>
            <div class="profile">
                <button id="profile-btn">
                    <img src="../assets/images/foto_perfil.png" alt="Perfil">
                </button>
                <div class="profile-options-list">
                    <div>
                        <img src="../assets/images/foto_perfil.png" alt="Perfil">
                        <span>Nome</span>
                    </div>
                    <hr>
                    <ul>
                        <li><a href="perfil_usuario.html"><i class="fa-solid fa-user"></i> Meu perfil</a></li>
                        <li><a href="#"><i class="fa-solid fa-question"></i> Ajuda</a></li>
                        <li><a href="#"><i class="fa-solid fa-right-from-bracket"></i> Sair</a></li>
                    </ul>
                </div>
            </div>
            <div class="mobile-menu-icon">
                <button onclick="showMenu()"><i id="menu-icon" class="fa-solid fa-bars"></i></button>
            </div>
        </nav>
        <div class="menu-items mobile-menu">
            <ul>
                <li><a href="../index.html">Início</a></li>
                <li><a href="../restaurantes.html">Restaurantes</a></li>
                <li><a href="../feed.html">Feed</a></li>
            </ul>
            <div class="access">
                <button onclick="showLogin()">Login</button>
                <button onclick="showRegister()">Cadastro</button>
            </div>
        </div>
    </header>
    <main>
        <div id="banner">
            <img src="../assets/images/camelias-pizza-bar-ltda.jpg" alt="Banner">
        </div>
        <section id="restaurant_profile">
            <!-- <label id="change_banner" class="btn-default">
                Alterar foto
                <input type="file" accept="image/*">
            </label> -->
            <section id="restaurant_info">
                <section id="restaurant_header">
                    <h1>Restaurante Sabor Caseiro</h1>
                    <div class="rating">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <span>5,0</span>
                    </div>
                    <div>
                        Categoria
                    </div>
                </section>
                <hr>
                <div>
                    <div>
                        <i class="fa-solid fa-location-dot"></i>
                        Endereço - Rua Pe. Madureira 255, Sorocaba, SP, 18013-210
                    </div>
                    <div>
                        <i class="fa-solid fa-phone"></i>
                        Telefone - (15) 3418-8749
                    </div>
                    <div>
                        <i class="fa-solid fa-clock"></i>
                        Horário de Funcionamento
                    </div>
                </div>
                <hr>
                <section>
                    <h2>Fotos</h2>
                    <div id="gallery">
                        <img src="../assets/images/camelias-pizza-bar-ltda.jpg" alt="">
                        <img src="../assets/images/restauranteBistro.png" alt="">
                    </div>
                </section>
                <hr>
                <section>
                    <h2>Avaliações</h2>
                    <div class="review">
                        <div class="review-info">
                            <div>
                                <a href="#"><img src="../assets/images/foto_perfil.png"></a>
                            </div>
                            <div class="review-details">
                                <div>
                                    <a href="#"><strong>Yasmin</strong></a> postou uma avaliação de
                                    <a href="#"><strong>Restaurante Sabor Caseiro</strong></a>
                                </div>
                                <div>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                    <span>5,0</span>
                                </div>
                            </div>
                        </div>
                        <p>
                            Restaurante muito bom, comida excelente
                        </p>
                        <div class="review-actions">
                            <button>
                                <i class="fa-solid fa-thumbs-up"></i> Curtir
                            </button>
                            <button>
                                <i class="fa-solid fa-comment"></i> Comentar
                            </button>
                        </div>
                    </div>
                    <div class="review">
    <div class="review-info">
        <div>
            <a href="#"><img src="../assets/images/foto_perfil.png" alt="Perfil"></a>
        </div>
        <div class="review-details">
            <div>
                <a href="#"><strong>Thais</strong></a> postou uma avaliação de
                <a href="#"><strong>Restaurante Sabor Caseiro</strong></a>
            </div>
            <div>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <span>3,0</span>
            </div>
        </div>
    </div>
    <p>
        Comida gostosa, porém o atendimento foi péssimo
    </p>
    <div class="review-actions">
        <button>
            <i class="fa-solid fa-thumbs-up"></i> Curtir
        </button>
        <button>
            <i class="fa-solid fa-comment"></i> Comentar
        </button>
    </div>
</div>
<div class="review">
    <div class="review-info">
        <div>
            <a href="#"><img src="../assets/images/foto_perfil.png" alt="Perfil"></a>
        </div>
        <div class="review-details">
            <div>
                <a href="#"><strong>João Dias</strong></a> postou uma avaliação de
                <a href="#"><strong>Restaurante Sabor Caseiro</strong></a>
            </div>
            <div>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <i class="fa-solid fa-star"></i>
                <span>4,0</span>
            </div>
        </div>
    </div>
    <p>
        Comida muito gostosa, porém o atendimento mediano
    </p>
    <div class="review-actions">
        <button>
            <i class="fa-solid fa-thumbs-up"></i> Curtir
        </button>
        <button>
            <i class="fa-solid fa-comment"></i> Comentar
        </button>
    </div>
</div>
                </section>
                <hr>
                <section>
                    <h2>Deixe sua Avaliação</h2>
                    <form id="review_form">
                        <div class="input-box">
                            <label for="rating" class="form-label">Nota</label>
                            <div class="input-field">
                                <select name="rating" id="rating" class="form-control" required>
                                    <option value="" disabled selected>Selecione a nota</option>
                                    <option value="5">5 - Excelente</option>
                                    <option value="4">4 - Muito bom</option>
                                    <option value="3">3 - Bom</option>
                                    <option value="2">2 - Regular</option>
                                    <option value="1">1 - Ruim</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-box">
                            <label for="review_text" class="form-label">Comentário:</label>
                            <div class="input-field">
                                <textarea id="review_text" name="review_text" required></textarea>
                            </div>
                        </div>
                        <button type="submit" class="btn-default">Enviar Avaliação</button>
                </section>
            </section>
        </section>
    </main>
    <script src="https://kit.fontawesome.com/51087b88d3.js" crossorigin="anonymous"></script>
    <script src="../assets/js/script.js"></script>
</body>
<script>
document.getElementById('review_form').addEventListener('submit', async function (event) {
    event.preventDefault();
    const rating = document.getElementById('rating').value;
    const reviewText = document.getElementById('review_text').value;
    const data = {
        id_usuario: 1, 
        id_restaurante: 1, 
        nota: rating,
        comentario: reviewText
    };

    try {
        const response = await fetch('https://projeto-cc.onrender.com/api/avaliacoes', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        if (response.ok) {
            const result = await response.json();
            alert('Avaliação enviada com sucesso!');
        } else {
            const error = await response.json();
            alert('Erro ao enviar a avaliação: ' + error.message);
        }
    } catch (error) {
        alert('Erro na comunicação com o servidor: ' + error.message);
    }
});
</script>
</html>
